<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>Promise</title>
	</head>

	<body>
		
		<script type="text/javascript" src="script/jquery-3.2.1.min.js"></script>
		<script>
	/*		异步：操作之间没有什么关系，同事进行多个操作 
			 *同步：只能做一件事；
			 * 
			 * 异步：代码更复杂
			 * 同步：代码简单
			 */

			/*Promise--承诺
			 *  消除异步操作
			 * 	用同步样的方式，来写异步代码
			 * 
			 * Promise.all([$.ajax(),$.ajax()]).then(results=>{
			 * 	全部成功
			 * },err=>{
			 * 	至少一个失败
			 * });
			 * 
			 * 
			 * Promise.all
			 * Promise.race 竞速 (哪里先返回先调用哪个)
			 * 
			 * 	Promise.race([
			 * 		$.ajax({url: 'http://a2.taobao.com/data/users'}),
					$.ajax({url: 'http://a15.taobao.com/data/users'}),
					$.ajax({url: 'http://a3.taobao.com/data/users'}),
					s$.ajax({url: 'http://a7.taobao.com/data/users'})
			 * ])
			 * 
	*/		 			
		
			Promise.all([
				$.ajax({url:"data/arr.txt", dataType:'json'}),
				$.ajax({url:"data/json.txt", dataType:'json'}),
				$.ajax({url:"data/num.txt", dataType:'json'})
			]).then(results=>{
				let [arr,json,num]=results;
				alert("成功");
				console.log(arr,json,num); //  [12, 78, 9, 65, 35, 1, 7] {a: 5, b: 9, c: "qian"} 888
			},err=>{
				alert("失败")
			})
		
		
		
		
		
			
	/*		var p = new Promise(function(resolve,reject){
				//异步代码
				//resolve  ----  成功
				//reject  ----  失败
				
				$.ajax({
					url:'data/arr.txt',
					dataType:'json',
					success(arr){
						resolve(arr);
					},
					error(err){
						reject(err);
					}
				});				
			});
			
			p.then(function(arr){
				alert('成功'+arr);
			},function(err){
				alert("失败"+err);
			})
			
	*/
			
			
			
			
			
		</script>

	</body>

</html>